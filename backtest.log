2025-04-04 11:54:19,034 - src - INFO - Initializing 'src' package...
2025-04-04 11:54:19,082 - src - INFO - Source package 'src' version 0.1.0 initialized.
2025-04-04 11:54:19,097 - src.core.config - INFO - Configuration loaded.
2025-04-04 11:54:19,118 - root - INFO - Registered strategies: ['MA', 'RSI', 'BB']
2025-04-04 11:54:19,134 - src.portfolio - INFO - Portfolio package initialized.
2025-04-04 11:54:19,149 - src.analysis - INFO - Analysis package initialized.
2025-04-04 11:54:19,160 - src.core - INFO - Core package initialized.
2025-04-04 11:54:19,418 - src.visualization - INFO - Visualization package initialized.
2025-04-04 11:54:19,422 - src.ui - INFO - UI package initialized.
2025-04-04 11:54:19,483 - src.core.data - INFO - DataLoader initialized. Data path: 'data\historical_prices.csv', Benchmark: 'SPY'
2025-04-04 11:54:19,484 - src.core.backtest_manager - INFO - BacktestManager initialized with initial capital: $100,000.00 and data path: data/historical_prices.csv
2025-04-04 11:54:19,484 - src.visualization.visualizer - INFO - BacktestVisualizer initialized.
2025-04-04 11:54:19,484 - src.core.data - INFO - DataLoader initialized. Data path: 'data\historical_prices.csv', Benchmark: 'SPY'
2025-04-04 11:54:19,485 - __main__ - INFO - Managers and DataLoader initialized successfully.
2025-04-04 11:54:19,488 - src.core.data - INFO - Loading historical data from: data\historical_prices.csv...
2025-04-04 11:54:19,517 - src.core.data - INFO - CSV loaded successfully: 12528 rows, 7 columns.
2025-04-04 11:54:19,526 - __main__ - INFO - Available tickers for selection: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT', 'NVDA', 'TSLA']
2025-04-04 11:54:19,527 - src.portfolio.risk_manager - INFO - RiskManager initialized with settings: max_pos_size=20.00%, min_pos_size=1.00%, max_open=5, stop=2.00%, R:R=2.0, trailing=False (act: 2.00%, dist: 1.50%), max_dd=20.00%, max_daily_loss=5.00%, market_filter=False (lookback: 100)
2025-04-04 11:54:19,531 - __main__ - INFO - Starting Dash application...
2025-04-04 11:54:19,532 - __main__ - INFO - Available tickers for selection: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT', 'NVDA', 'TSLA']
2025-04-04 11:54:19,532 - __main__ - INFO - Found 7 tickers during startup.
2025-04-04 11:54:19,532 - __main__ - INFO - Running app on 0.0.0.0:8050 with debug=True
2025-04-04 11:54:39,159 - __main__ - INFO - ============================================2025-04-04 11:55:38,592 - __main__ - INFO - Dash application stopped.
by: run-backtest-button. Click: 1
2025-04-04 11:54:39,160 - __main__ - INFO - Strategy: MA, Tickers: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT'], Risk Mode: disabled
2025-04-04 11:54:40,089 - __main__ - INFO - Collected strategy parameters: {'short_window': 20, 'long_window': 50}
2025-04-04 11:54:40,089 - __main__ - INFO - Risk Management DISABLED.
2025-04-04 11:54:40,089 - __main__ - INFO - Calling backtest_manager.run_backtest...
2025-04-04 11:54:40,089 - src.core.backtest_manager - INFO - --- Starting New Backtest ---
2025-04-04 11:54:40,089 - src.core.backtest_manager - INFO - Strategy: MA, Tickers: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT']
2025-04-04 11:54:40,089 - src.core.backtest_manager - INFO - Strategy Params: {'short_window': 20, 'long_window': 50}, Risk Params: None
2025-04-04 11:54:40,089 - src.core.backtest_manager - INFO - Initialized strategy 'MA' with params: {'short_window': 20, 'long_window': 50}
2025-04-04 11:54:40,089 - src.portfolio.risk_manager - INFO - RiskManager initialized with settings: max_pos_size=20.00%, min_pos_size=1.00%, max_open=5, stop=2.00%, R:R=2.0, trailing=False (act: 2.00%, dist: 1.50%), max_dd=20.00%, max_daily_loss=5.00%, market_filter=False (lookback: 100)
2025-04-04 11:54:40,089 - src.core.backtest_manager - INFO - Initialized RiskManager with default parameters.
2025-04-04 11:54:40,089 - src.portfolio.portfolio_manager - INFO - PortfolioManager initialized with capital $100,000.00 and linked RiskManager.
2025-04-04 11:54:40,089 - src.core.backtest_manager - INFO - Initialized PortfolioManager.
2025-04-04 11:54:40,089 - src.core.data - INFO - Loading historical data from: data\historical_prices.csv...
2025-04-04 11:54:40,113 - src.core.data - INFO - CSV loaded successfully: 12528 rows, 7 columns.
2025-04-04 11:54:40,155 - src.core.data - INFO - Finished loading data for 7/7 requested tickers.
2025-04-04 11:54:40,155 - src.core.backtest_manager - INFO - Using data for 5 tickers: AAPL, AMZN, GOOGL, META, MSFT
2025-04-04 11:54:40,173 - src.core.backtest_manager - INFO - Combined data prepared. Shape: (1566, 25). Date range: 2020-01-02 00:00:00 to 2023-12-29 00:00:00
2025-04-04 11:54:40,173 - src.core.backtest_manager - INFO - Generating signals for all tickers...
2025-04-04 11:54:40,225 - src.core.backtest_manager - INFO - Signal generation complete for 5 tickers.
2025-04-04 11:54:40,226 - src.core.backtest_manager - INFO - Starting backtest simulation loop...
2025-04-04 11:54:40,395 - src.core.backtest_manager - ERROR - CRITICAL error during backtest execution: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
2025-04-04 11:54:40,395 - src.core.backtest_manager - ERROR - Traceback (most recent call last):
  File "x:\GitHub\Backtester_app\src\core\backtest_manager.py", line 306, in run_backtest
    portfolio_manager.open_position(signal_data)
  File "x:\GitHub\Backtester_app\src\portfolio\portfolio_manager.py", line 170, in open_position
    shares_to_trade = self.risk_manager.calculate_position_size(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "x:\GitHub\Backtester_app\src\portfolio\risk_manager.py", line 173, in calculate_position_size
    target_shares = max(min_shares, target_shares)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "X:\GitHub\Backtester_app\.venv\Lib\site-packages\pandas\core\generic.py", line 1577, in __nonzero__
    raise ValueError(
ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().

2025-04-04 11:54:40,403 - __main__ - INFO - Backtest manager finished.
2025-04-04 11:54:40,405 - __main__ - ERROR - Backtest manager returned None for results or stats.
2025-04-04 11:55:38,289 - __main__ - INFO - Dash application stopped.
