2025-04-04 12:02:16,152 - src - INFO - Initializing 'src' package...
2025-04-04 12:02:16,152 - src - INFO - Source package 'src' version 0.1.0 initialized.
2025-04-04 12:02:16,159 - src.core.config - INFO - Configuration loaded.
2025-04-04 12:02:16,169 - root - INFO - Registered strategies: ['MA', 'RSI', 'BB']
2025-04-04 12:02:16,175 - src.portfolio - INFO - Portfolio package initialized.
2025-04-04 12:02:16,178 - src.analysis - INFO - Analysis package initialized.
2025-04-04 12:02:16,180 - src.core - INFO - Core package initialized.
2025-04-04 12:02:16,319 - src.visualization - INFO - Visualization package initialized.
2025-04-04 12:02:16,319 - src.ui - INFO - UI package initialized.
2025-04-04 12:02:16,372 - src.core.data - INFO - DataLoader initialized. Data path: 'data\historical_prices.csv', Benchmark: 'SPY'
2025-04-04 12:02:16,375 - src.core.backtest_manager - INFO - BacktestManager initialized with initial capital: $100,000.00 and data path: data/historical_prices.csv
2025-04-04 12:02:16,377 - src.visualization.visualizer - INFO - BacktestVisualizer initialized.
2025-04-04 12:02:16,378 - src.core.data - INFO - DataLoader initialized. Data path: 'data\historical_prices.csv', Benchmark: 'SPY'
2025-04-04 12:02:16,379 - __main__ - INFO - Managers and DataLoader initialized successfully.
2025-04-04 12:02:16,381 - src.core.data - INFO - Loading historical data from: data\historical_prices.csv...
2025-04-04 12:02:16,408 - src.core.data - INFO - CSV loaded successfully: 12528 rows, 7 columns.
2025-04-04 12:02:16,415 - __main__ - INFO - Available tickers for selection: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT', 'NVDA', 'TSLA']
2025-04-04 12:02:16,416 - src.portfolio.risk_manager - INFO - RiskManager initialized with settings: max_pos_size=20.00%, min_pos_size=1.00%, max_open=5, stop=2.00%, R:R=2.0, trailing=False (act: 2.00%, dist: 1.50%), max_dd=20.00%, max_daily_loss=5.00%, market_filter=False (lookback: 100)
2025-04-04 12:02:16,422 - __main__ - INFO - Starting Dash application...
2025-04-04 12:02:16,422 - __main__ - INFO - Available tickers for selection: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT', 'NVDA', 'TSLA']
2025-04-04 12:02:16,422 - __main__ - INFO - Found 7 tickers during startup.
2025-04-04 12:02:16,425 - __main__ - INFO - Running app on 0.0.0.0:8050 with debug=True
2025-04-04 12:02:21,096 - __main__ - INFO - ==================================================
2025-04-04 12:02:21,096 - __main__ - INFO - Backtest triggered by: run-backtest-button. Click: 1
2025-04-04 12:02:21,096 - __main__ - INFO - Strategy: MA, Tickers: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT'], Risk Mode: disabled
2025-04-04 12:02:21,951 - __main__ - INFO - Collected strategy parameters: {'short_window': 20, 'long_window': 50}
2025-04-04 12:02:21,952 - __main__ - INFO - Risk Management DISABLED.
2025-04-04 12:02:21,952 - __main__ - INFO - Calling backtest_manager.run_backtest...
2025-04-04 12:02:21,953 - src.core.backtest_manager - INFO - --- Starting New Backtest ---
2025-04-04 12:02:21,953 - src.core.backtest_manager - INFO - Strategy: MA, Tickers: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT']
2025-04-04 12:02:21,954 - src.core.backtest_manager - INFO - Strategy Params: {'short_window': 20, 'long_window': 50}, Risk Params: None
2025-04-04 12:02:21,954 - src.core.backtest_manager - INFO - Initialized strategy 'MA' with params: {'short_window': 20, 'long_window': 50}
2025-04-04 12:02:21,954 - src.portfolio.risk_manager - INFO - RiskManager initialized with settings: max_pos_size=20.00%, min_pos_size=1.00%, max_open=5, stop=2.00%, R:R=2.0, trailing=False (act: 2.00%, dist: 1.50%), max_dd=20.00%, max_daily_loss=5.00%, market_filter=False (lookback: 100)
2025-04-04 12:02:21,954 - src.core.backtest_manager - INFO - Initialized RiskManager with default parameters.
2025-04-04 12:02:21,954 - src.portfolio.portfolio_manager - INFO - PortfolioManager initialized with capital $100,000.00 and linked RiskManager.
2025-04-04 12:02:21,954 - src.core.backtest_manager - INFO - Initialized PortfolioManager.
2025-04-04 12:02:21,954 - src.core.data - INFO - Loading historical data from: data\historical_prices.csv...
2025-04-04 12:02:21,976 - src.core.data - INFO - CSV loaded successfully: 12528 rows, 7 columns.
2025-04-04 12:02:22,004 - src.core.data - INFO - Finished loading data for 7/7 requested tickers.
2025-04-04 12:02:22,004 - src.core.backtest_manager - INFO - Using data for 5 tickers: AAPL, AMZN, GOOGL, META, MSFT
2025-04-04 12:02:22,020 - src.core.backtest_manager - INFO - Combined data prepared. Shape: (1566, 25). Date range: 2020-01-02 00:00:00 to 2023-12-29 00:00:00
2025-04-04 12:02:22,020 - src.core.backtest_manager - INFO - Generating signals for all tickers...
2025-04-04 12:02:22,075 - src.core.backtest_manager - INFO - Signal generation complete for 5 tickers.
2025-04-04 12:02:22,075 - src.core.backtest_manager - INFO - Starting backtest simulation loop...
2025-04-04 12:02:22,234 - src.core.backtest_manager - ERROR - CRITICAL error during backtest execution: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
2025-04-04 12:02:22,243 - src.core.backtest_manager - ERROR - Traceback (most recent call last):
  File "x:\GitHub\Backtester_app\src\core\backtest_manager.py", line 306, in run_backtest
    portfolio_manager.open_position(signal_data)
  File "x:\GitHub\Backtester_app\src\portfolio\portfolio_manager.py", line 170, in open_position
    shares_to_trade = self.risk_manager.calculate_position_size(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "x:\GitHub\Backtester_app\src\portfolio\risk_manager.py", line 173, in calculate_position_size
    target_shares = max(min_shares, target_shares)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "X:\GitHub\Backtester_app\.venv\Lib\site-packages\pandas\core\generic.py", line 1577, in __nonzero__
    raise ValueError(
ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().

2025-04-04 12:02:22,245 - __main__ - INFO - Backtest manager finished.
2025-04-04 12:02:22,245 - __main__ - ERROR - Backtest manager returned None for results or stats.
2025-04-04 12:02:27,227 - __main__ - INFO - ==================================================
2025-04-04 12:02:27,228 - __main__ - INFO - Backtest triggered by: run-backtest-button. Click: 2
2025-04-04 12:02:27,228 - __main__ - INFO - Strategy: BB, Tickers: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT'], Risk Mode: disabled
2025-04-04 12:02:27,341 - __main__ - INFO - Collected strategy parameters: {'window': 20, 'num_std': 2.0}
2025-04-04 12:02:27,342 - __main__ - INFO - Risk Management DISABLED.
2025-04-04 12:02:27,342 - __main__ - INFO - Calling backtest_manager.run_backtest...
2025-04-04 12:02:27,342 - src.core.backtest_manager - INFO - --- Starting New Backtest ---
2025-04-04 12:02:27,342 - src.core.backtest_manager - INFO - Strategy: BB, Tickers: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT']
2025-04-04 12:02:27,342 - src.core.backtest_manager - INFO - Strategy Params: {'window': 20, 'num_std': 2.0}, Risk Params: None
2025-04-04 12:02:27,342 - src.core.backtest_manager - INFO - Initialized strategy 'BB' with params: {'window': 20, 'num_std': 2.0}
2025-04-04 12:02:27,342 - src.portfolio.risk_manager - INFO - RiskManager initialized with settings: max_pos_size=20.00%, min_pos_size=1.00%, max_open=5, stop=2.00%, R:R=2.0, trailing=False (act: 2.00%, dist: 1.50%), max_dd=20.00%, max_daily_loss=5.00%, market_filter=False (lookback: 100)
2025-04-04 12:02:27,342 - src.core.backtest_manager - INFO - Initialized RiskManager with default parameters.
2025-04-04 12:02:27,342 - src.portfolio.portfolio_manager - INFO - PortfolioManager initialized with capital $100,000.00 and linked RiskManager.
2025-04-04 12:02:27,342 - src.core.backtest_manager - INFO - Initialized PortfolioManager.
2025-04-04 12:02:27,342 - src.core.data - INFO - Finished loading data for 7/7 requested tickers.
2025-04-04 12:02:27,342 - src.core.backtest_manager - INFO - Using data for 5 tickers: AAPL, AMZN, GOOGL, META, MSFT
2025-04-04 12:02:27,352 - src.core.backtest_manager - INFO - Combined data prepared. Shape: (1566, 25). Date range: 2020-01-02 00:00:00 to 2023-12-29 00:00:00
2025-04-04 12:02:27,361 - src.core.backtest_manager - INFO - Generating signals for all tickers...
2025-04-04 12:02:27,433 - src.core.backtest_manager - INFO - Signal generation complete for 5 tickers.
2025-04-04 12:02:27,441 - src.core.backtest_manager - INFO - Starting backtest simulation loop...
2025-04-04 12:02:27,487 - src.core.backtest_manager - ERROR - CRITICAL error during backtest execution: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
2025-04-04 12:02:27,487 - src.core.backtest_manager - ERROR - Traceback (most recent call last):
  File "x:\GitHub\Backtester_app\src\core\backtest_manager.py", line 306, in run_backtest
    portfolio_manager.open_position(signal_data)
  File "x:\GitHub\Backtester_app\src\portfolio\portfolio_manager.py", line 170, in open_position
    shares_to_trade = self.risk_manager.calculate_position_size(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "x:\GitHub\Backtester_app\src\portfolio\risk_manager.py", line 173, in calculate_position_size
    target_shares = max(min_shares, target_shares)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "X:\GitHub\Backtester_app\.venv\Lib\site-packages\pandas\core\generic.py", line 1577, in __nonzero__
    raise ValueError(
ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().

2025-04-04 12:02:27,487 - __main__ - INFO - Backtest manager finished.
2025-04-04 12:02:27,487 - __main__ - ERROR - Backtest manager returned None for results or stats.
2025-04-04 12:02:30,241 - __main__ - INFO - ==================================================
2025-04-04 12:02:30,244 - __main__ - INFO - Backtest triggered by: run-backtest-button. Click: 3
2025-04-04 12:02:30,244 - __main__ - INFO - Strategy: RSI, Tickers: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT'], Risk Mode: disabled
2025-04-04 12:02:30,357 - __main__ - INFO - Collected strategy parameters: {'period': 14, 'overbought': 70, 'oversold': 30}
2025-04-04 12:02:30,363 - __main__ - INFO - Risk Management DISABLED.
2025-04-04 12:02:30,388 - __main__ - INFO - Calling backtest_manager.run_backtest...
2025-04-04 12:02:30,412 - src.core.backtest_manager - INFO - --- Starting New Backtest ---
2025-04-04 12:02:30,423 - src.core.backtest_manager - INFO - Strategy: RSI, Tickers: ['AAPL', 'AMZN', 'GOOGL', 'META', 'MSFT']
2025-04-04 12:02:30,453 - src.core.backtest_manager - INFO - Strategy Params: {'period': 14, 'overbought': 70, 'oversold': 30}, Risk Params: None
2025-04-04 12:02:30,453 - src.core.backtest_manager - INFO - Initialized strategy 'RSI' with params: {'period': 14, 'overbought': 70, 'oversold': 30}
2025-04-04 12:02:30,454 - src.portfolio.risk_manager - INFO - RiskManager initialized with settings: max_pos_size=20.00%, min_pos_size=1.00%, max_open=5, stop=2.00%, R:R=2.0, trailing=False (act: 2.00%, dist: 1.50%), max_dd=20.00%, max_daily_loss=5.00%, market_filter=False (lookback: 100)
2025-04-04 12:02:30,454 - src.core.backtest_manager - INFO - Initialized RiskManager with default parameters.
2025-04-04 12:02:30,455 - src.portfolio.portfolio_manager - INFO - PortfolioManager initialized with capital $100,000.00 and linked RiskManager.
2025-04-04 12:02:30,455 - src.core.backtest_manager - INFO - Initialized PortfolioManager.
2025-04-04 12:02:30,455 - src.core.data - INFO - Finished loading data for 7/7 requested tickers.
2025-04-04 12:02:30,455 - src.core.backtest_manager - INFO - Using data for 5 tickers: AAPL, AMZN, GOOGL, META, MSFT
2025-04-04 12:02:30,462 - src.core.backtest_manager - INFO - Combined data prepared. Shape: (1566, 25). Date range: 2020-01-02 00:00:00 to 2023-12-29 00:00:00
2025-04-04 12:02:30,462 - src.core.backtest_manager - INFO - Generating signals for all tickers...
2025-04-04 12:02:30,516 - src.core.backtest_manager - INFO - Signal generation complete for 5 tickers.
2025-04-04 12:02:30,516 - src.core.backtest_manager - INFO - Starting backtest simulation loop...
2025-04-04 12:02:30,621 - src.core.backtest_manager - ERROR - CRITICAL error during backtest execution: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().
2025-04-04 12:02:30,621 - src.core.backtest_manager - ERROR - Traceback (most recent call last):
  File "x:\GitHub\Backtester_app\src\core\backtest_manager.py", line 306, in run_backtest
    portfolio_manager.open_position(signal_data)
  File "x:\GitHub\Backtester_app\src\portfolio\portfolio_manager.py", line 170, in open_position
    shares_to_trade = self.risk_manager.calculate_position_size(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "x:\GitHub\Backtester_app\src\portfolio\risk_manager.py", line 173, in calculate_position_size
    target_shares = max(min_shares, target_shares)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "X:\GitHub\Backtester_app\.venv\Lib\site-packages\pandas\core\generic.py", line 1577, in __nonzero__
    raise ValueError(
ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().

2025-04-04 12:02:30,621 - __main__ - INFO - Backtest manager finished.
2025-04-04 12:02:30,621 - __main__ - ERROR - Backtest manager returned None for results or stats.
